(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{294:function(e,t,a){e.exports=a(514)},299:function(e,t,a){},508:function(e,t){},514:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),l=a.n(o),s=(a(299),a(18)),i=a(19),c=a(21),u=a(20),d=a(22),p=a(283),m=a(53),h=a(60),g=a(284),E=a(530),O=a(177),f=a(531),v=a(522),b=a(526),y=a(523),C=a(515),S=a(527),w=function(){return console.log("open login modal"),{type:"OPEN_LOGIN_MODAL"}},L=function(){return{type:"CLOSE_LOGIN_MODAL"}},_=function(){return{type:"OPEN_REGISTER_MODAL"}},A=a(23),M=a(27),j=a.n(M),R=a(39),k=a(44),I=a.n(k),P=function(e,t){return{type:"GET_ERRORS",payload:{message:e,status:t,id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}},U=function(e,t){return{type:"GET_LOGIN_ERRORS",payload:{message:e,status:t,id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}},D=a(64),T=a.n(D),G=function(e,t){return function(){var a=Object(R.a)(j.a.mark(function a(n,r){var o;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o={currUserId:e,userToFollowId:t},console.log(T()(r)),a.prev=2,a.next=5,I.a.put("http://localhost:8000/api/users/",o,T()(r));case 5:a.sent,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),console.log(a.t0,"follow err");case 11:case"end":return a.stop()}},a,null,[[2,8]])}));return function(e,t){return a.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(R.a)(j.a.mark(function t(a,n){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"USER_UPDATING"}),t.prev=1,t.next=4,I.a.put("http://localhost:8000/api/users/".concat(e),T()(n));case 4:r=t.sent,a({type:"USERS_LOADED",payload:r.data.updatedUser}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"UPDATING_USER_ERROR",payload:t.t0});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,a){return t.apply(this,arguments)}}()},N=function(){return function(){var e=Object(R.a)(j.a.mark(function e(t,a){var n,r,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:"USERS_LOADING"}),n=(new Date).getTime()/1e3,r=a().auth.tokenExp-n,!(a().auth.token&&r<0)){e.next=7;break}return t(J()),t(w()),e.abrupt("return");case 7:return e.prev=7,e.next=10,I.a.get("http://localhost:8000/api/users/",T()(a));case 10:o=e.sent,console.log("22222",o.data),t({type:"USERS_LOADED",payload:o.data.users}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0,"ERR z GET USERS ACTION");case 18:case"end":return e.stop()}},e,null,[[7,15]])}));return function(t,a){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(R.a)(j.a.mark(function e(t,a){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"POSTS_LOADING"}),e.prev=1,e.next=4,I.a.get("http://localhost:8000/api/posts/",T()(a));case 4:n=e.sent,t({type:"GET_POSTS",payload:n.data.posts}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a){return e.apply(this,arguments)}}()},z=function(e){var t=e.data;return function(){var e=Object(R.a)(j.a.mark(function e(a){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"ADD_TO_POSTS",payload:t.post});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},H=function(e,t){var a=e.email,n=e.password;return function(){var e=Object(R.a)(j.a.mark(function e(r){var o,l,s,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,n,"krok 1"),o={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:a,password:n}),r({type:"LOGIN_LOADING"}),e.prev=4,e.next=7,I.a.post("http://localhost:8000/api/users/login",l,o);case 7:s=e.sent,r({type:"LOGIN_SUCCESS",payload:{user:s.data.user,token:s.data.token,tokenExp:s.data.tokenExp,tokenIat:s.data.tokenIat}}),r(N()),r(F()),r({type:"CLOSE_LOGIN_MODAL"}),t&&(i=JSON.stringify(s.data.user),localStorage.setItem("user",i),localStorage.setItem("token",s.data.token),localStorage.setItem("tokenExp",s.data.tokenExp)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0,"message bledy z auth login actions"),r(U(e.t0,e.t0.response.status,"REGISTER_FAIL")),r({type:"LOGIN_FAIL"});case 20:case"end":return e.stop()}},e,null,[[4,15]])}));return function(t){return e.apply(this,arguments)}}()},J=function(){return function(e){e({type:"LOGOUT_SUCCESS"}),e({type:"USERS_LOADED",payload:[]})}},W=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:"",rememberMe:!1,message:[]},a.handleChange=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=a.state,t=e.email,n=e.password,r=e.rememberMe,o=a.props,l=o.login,s=o.closeLoginModal,i=o.isAuthanticated;l({email:t,password:n},r),i&&(a.props.getUsers(),s())},a.toggle=function(){return a.setState({rememberMe:!a.state.rememberMe})},a.handleClickOnLink=function(){console.log("test onLink");var e=a.props,t=e.closeLoginModal,n=e.openForgotPasswordModal;t(),n()},a.renderErrorMessage=function(){var e=a.state.message;return 0!==e.length&&r.a.createElement(g.a,{padded:"vertically"},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,null,r.a.createElement(E.a,{error:!0,header:"There was some errors with your submission",list:[e]}))))},a.renderModalContent=function(){var e=a.state,t=e.email,n=e.password;return a.props.isLoading?r.a.createElement(O.a,{style:{height:"300px"}},r.a.createElement(f.a,{active:!0},r.a.createElement(v.a,{size:"massive"},"Loading"))):r.a.createElement(b.a,{onSubmit:a.handleSubmit},r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",placeholder:"Email",value:t,onChange:a.handleChange})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",value:n,onChange:a.handleChange})),r.a.createElement(b.a.Field,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(y.a,{label:"Remember me",onChange:a.toggle,checked:a.state.rememberMe}),r.a.createElement("a",{style:{cursor:"pointer"},onClick:a.handleClickOnLink},"Forgot your password")),r.a.createElement(C.a,{color:"orange",fluid:!0,type:"submit"},"Submit"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.error;console.log(t,e.error,"porownaine z poprzednim"),t!==e.error&&("REGISTER_FAIL"===t.id?this.setState({message:t.message.response.data.message}):this.setState({message:null}))}},{key:"render",value:function(){var e=this.props,t=e.loginModalOpened,a=e.closeLoginModal;return console.warn(this.props.errors,"errors loginError LOGIN MODAL"),r.a.createElement(S.a,{size:"tiny",open:t,centered:!1,onClose:a},r.a.createElement(S.a.Header,null,"Login"),r.a.createElement(S.a.Content,null,this.renderErrorMessage(),this.renderModalContent()))}}]),t}(n.Component),B=Object(A.b)(function(e){return{isLoading:e.auth.isLoading,error:e.loginError,isAuthanticated:e.auth.isAuthanticated,loginModalOpened:e.layout.loginModalOpened}},{login:H,openLoginModal:w,closeLoginModal:L,getUsers:N,openForgotPasswordModal:function(){return{type:"OPEN_FORGOT_PASSWORD_MODAL"}}})(W),K=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",email:"",password:"",confirmPassword:"",isRegister:!1,message:[]},a.handleChange=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.email,o=t.password,l=t.confirmPassword;(0,a.props.register)({name:n,email:r,password:o,confirmPassword:l})},a.handleCloseModal=function(){(0,a.props.closeRegisterModal)()},a.renderErrorMessage=function(){var e=a.state.message;return 0!==e.length&&r.a.createElement(g.a,{padded:"vertically"},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,null,r.a.createElement(E.a,{error:!0,header:"There was some errors with your submission",list:e}))))},a.renderModalContent=function(){var e=a.state,t=e.name,n=e.email,o=e.password,l=e.confirmPassword;return a.props.isLoading?r.a.createElement(O.a,{style:{height:"300px"}},r.a.createElement(f.a,{active:!0},r.a.createElement(v.a,{size:"massive"},"Loading"))):r.a.createElement(b.a,{onSubmit:a.handleSubmit},r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"name",placeholder:"Name",value:t,onChange:a.handleChange})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",placeholder:"Email",value:n,onChange:a.handleChange})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",value:o,onChange:a.handleChange})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Confirm password"),r.a.createElement("input",{name:"confirmPassword",type:"password",placeholder:"Confirm password",value:l,onChange:a.handleChange})),r.a.createElement(C.a,{color:"orange",fluid:!0,type:"submit"},"Submit"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error;t.isAuthenticated;if(console.log(a,e.error,"porownaine z poprzednim"),a!==e.error){var n=[],r=a.message.response.data.message;if("object"===typeof r)for(var o in r)n.push(r[o]);"string"===typeof r&&n.push(r),"REGISTER_FAIL"===a.id?this.setState({message:n}):this.setState({message:null})}}},{key:"render",value:function(){var e=this.props.registerModalOpened;return r.a.createElement(S.a,{size:"tiny",open:e,onClose:this.handleCloseModal,centered:!1},r.a.createElement(S.a.Header,null,"Register"),r.a.createElement(S.a.Content,null,this.renderErrorMessage(),this.renderModalContent()))}}]),t}(n.Component),V=Object(A.b)(function(e){return{registerModalOpened:e.layout.registerModalOpened,isLoading:e.auth.isLoading,isAuthenticated:e.auth.isAuthenticated,error:e.registerError}},{register:function(e){var t=e.name,a=e.email,n=e.password,r=e.confirmPassword;return function(){var e=Object(R.a)(j.a.mark(function e(o){var l,s,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:t,email:a,password:n,confirmPassword:r}),o({type:"REGISTER_LOADING"}),e.prev=3,e.next=6,I.a.post("http://localhost:8000/api/users/",s,l);case 6:i=e.sent,o({type:"REGISTER_SUCCESS",payload:i.data}),o({type:"OPEN_LOGIN_MODAL"}),o({type:"CLOSE_REGISTER_MODAL"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),o(P(e.t0,e.t0.response.status,"REGISTER_FAIL")),o({type:"REGISTER_FAIL"});case 16:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}()},clearErrors:function(){return{type:"CLEAR_ERRORS"}},openLoginModal:w,openRegisterModal:_,closeRegisterModal:function(){return{type:"CLOSE_REGISTER_MODAL"}}})(K),X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",message:[]},a.handleChange=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){a.state.email;var e=a.props;e.login,e.closeLoginModal,e.isAuthanticated},a.handleClickOnLink=function(){console.log("test onLink"),(0,a.props.closeLoginModal)()},a.renderErrorMessage=function(){var e=a.state.message;return 0!==e.length&&r.a.createElement(g.a,{padded:"vertically"},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,null,r.a.createElement(E.a,{error:!0,header:"There was some errors with your submission",list:[e]}))))},a.renderModalContent=function(){var e=a.state,t=e.email;e.password;return a.props.isLoading?r.a.createElement(O.a,{style:{height:"300px"}},r.a.createElement(f.a,{active:!0},r.a.createElement(v.a,{size:"massive"},"Loading"))):r.a.createElement(b.a,{onSubmit:a.handleSubmit},r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",placeholder:"Email",value:t,onChange:function(e){return a.setState({email:e.target.value})}})),r.a.createElement(C.a,{color:"orange",fluid:!0,type:"submit"},"Reset Password"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.forgotPasswordModalOpened,a=e.closeForgotPasswordModal;return console.warn(this.props.errors,"errors loginError LOGIN MODAL"),r.a.createElement(S.a,{size:"tiny",open:t,centered:!1,onClose:a},r.a.createElement(S.a.Header,null,"Reset password"),r.a.createElement(S.a.Content,null,this.renderErrorMessage(),this.renderModalContent()))}}]),t}(n.Component),q=Object(A.b)(function(e){return{isLoading:e.auth.isLoading,error:e.loginError,isAuthanticated:e.auth.isAuthanticated,forgotPasswordModalOpened:e.layout.forgotPasswordModalOpened}},{login:H,openLoginModal:w,closeLoginModal:L,closeForgotPasswordModal:function(){return{type:"CLOSE_FORGOT_PASSWORD_MODAL"}},getUsers:N})(X),Q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:"",loginModalOpen:!1,registerModalOpen:!1,forgotPasswordOpen:!1},a.handleItemClick=function(e,t){var n=t.name,r=a.props,o=r.openLoginModal,l=r.openRegisterModal,s=r.logout;"login"===n&&o(),"register"===n&&l(),"logout"===n&&s(),"home"===n&&a.setState({activeItem:n})},a.handleCloseLoginModal=function(){return a.setState({loginModalOpen:!1})},a.handleCloseRegisterModal=function(){return a.setState({registerModalOpen:!1})},a.handleOpenLoginModal=function(){return a.setState({loginModalOpen:!0})},a.handleCloseModal=function(e){e.preventDefault(),console.log("rrrrrrrrrclosemodal"),console.log(e.target.value),a.setState({loginModalOpen:!1,registerModalOpen:!1})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeItem,a=(e.redirect,this.props),n=a.loginModalOpened,o=a.registerModalOpened,l=(a.forgotPasswordOpened,a.user);return console.warn(this.props.user,"user NAV !!!!!!!!!!!!!!!!!!"),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"menu",secondary:!0},l?r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,null,r.a.createElement(m.a,{circular:!0,name:"user"}),r.a.createElement("span",null,this.props.user.name)),r.a.createElement(p.a.Item,{name:"logout",active:"logout"===t,onClick:this.handleItemClick})):r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,{name:"login",active:"login"===t,onClick:this.handleItemClick}),r.a.createElement(p.a.Item,{name:"register",active:"register"===t,onClick:this.handleItemClick}))),r.a.createElement(B,{modalOpen:n}),r.a.createElement(V,{modalOpen:o,handleOpenLoginModal:this.handleOpenLoginModal}),r.a.createElement(q,null))}}]),t}(n.Component),Y=Object(A.b)(function(e){return{user:e.auth.user,loginModalOpened:e.layout.loginModalOpened,registerModalOpened:e.layout.registerModalOpened}},{openLoginModal:w,openRegisterModal:_,logout:J})(Q),Z=a(72),$=(n.Component,a(528)),ee=a(529),te=a(524),ae=a(525),ne=a(49),re=a.n(ne),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={title:"",description:"",message:[]},a.handleSubmit=function(){var e=a.state,t=e.title,n=e.description,r=a.props,o=r.closeAddPostModal;(0,r.addPost)({title:t,description:n}),o()},a.renderModalContent=function(){var e=a.state,t=e.title,n=e.description;return r.a.createElement(b.a,{onSubmit:a.handleSubmit},r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Title"),r.a.createElement(te.a,{name:"title",placeholder:"title",value:t,onChange:function(e){return a.setState({title:e.target.value})}})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Description"),r.a.createElement(ae.a,{name:"description",rows:3,placeholder:"description",value:n,onChange:function(e){return a.setState({description:e.target.value})}})),r.a.createElement(C.a,{color:"orange",fluid:!0,onClick:a.handleSubmit},"Add"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addPostModalOpened,a=e.closeAddPostModal;return r.a.createElement(S.a,{size:"tiny",open:t,centered:!1,onClose:a},r.a.createElement(S.a.Header,null,"Add Post"),r.a.createElement(S.a.Content,null,this.renderModalContent()))}}]),t}(n.Component),le=Object(A.b)(function(e){return{user:e.auth.user,error:e.loginError,isAuthanticated:e.auth.isAuthanticated,addPostModalOpened:e.layout.addPostModalOpened,posts:e.posts.posts}},{closeAddPostModal:function(){return{type:"CLOSE_ADD_POST_MODAL"}},addPost:function(e){var t=e.title,a=e.description;return function(){var e=Object(R.a)(j.a.mark(function e(n,r){var o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={title:t,description:a,author:r().auth.user._id},e.prev=1,e.next=4,I.a.post("http://localhost:8000/api/posts/",o,T()(r));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,a){return e.apply(this,arguments)}}()},addToPosts:z})(oe),se=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleClickAddPost=function(){(0,a.props.openAddPostModal)()},a.renderPostContent=function(e,t){return r.a.createElement($.a,{selection:!0,verticalAlign:"middle"},r.a.createElement($.a.Item,null,r.a.createElement($.a.Content,null,r.a.createElement($.a.Header,null,e),r.a.createElement("p",null,t))))},a.renderPosts=function(){var e=a.props,t=e.currUser,n=e.posts;return e.postsLoading?r.a.createElement(O.a,{style:{height:"300px"}},r.a.createElement(f.a,{active:!0},r.a.createElement(v.a,{size:"massive"},"Loading"))):n.filter(function(e){return e.author===t._id?e:t.following.find(function(t){return t===e.author})?e:void 0}).map(function(e){return r.a.createElement(g.a.Row,{key:e.id,style:{marginBottom:"20px",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(ee.a,null,r.a.createElement(ee.a.Content,{header:e.title},r.a.createElement(m.a,{name:"user"}),e.authorName),r.a.createElement(ee.a.Content,null,a.renderPostContent(e.title,e.description)),r.a.createElement(ee.a.Content,{extra:!0},r.a.createElement(m.a,{name:"heart"}),e.likes)))})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.addToPosts;re()("http://localhost:8000").on("posts",function(t){"create"===t.action&&e({data:t})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{padded:!0,centered:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:"6"},r.a.createElement(C.a,{fluid:!0,primary:!0,style:{paddingLeft:"30px",paddingRight:"30px"},onClick:this.handleClickAddPost},"Add Post"))),r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:"6"},this.renderPosts()))),r.a.createElement(le,null))}}]),t}(n.Component),ie=Object(A.b)(function(e){return{currUser:e.auth.user,posts:e.posts.posts,postsLoading:e.posts.postsLoading}},{openAddPostModal:function(){return{type:"OPEN_ADD_POST_MODAL"}},addToPosts:z})(se),ce=a(58),ue=a(535),de=a(89),pe=a.n(de),me=a(532),he=function(e){return console.log(e,"props"),r.a.createElement($.a,{selection:!0,verticalAlign:"middle"},r.a.createElement($.a.Item,{active:!1},r.a.createElement($.a.Content,null,r.a.createElement(g.a,{verticalAlign:"middle"},r.a.createElement(g.a.Column,{width:"12",style:{display:"flex",flexDirection:"row"}},r.a.createElement(m.a,{name:"user"}),r.a.createElement($.a.Header,null,e.user.name)),r.a.createElement(g.a.Column,{width:"4"},e.ifFollowing?r.a.createElement(C.a,{circular:!0,positive:!0,icon:"check"}):r.a.createElement(me.a,{trigger:r.a.createElement(C.a,{circular:!0,icon:"add",onClick:function(){return e.handleAddFriendClick(e.user)}}),content:"Send the invitation"}))))))},ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleAddFriendClick=function(e){var t=a.props,n=t.currUser;(0,t.follow)(n._id,e._id)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.updatedCurrUser,n=t.updatedUsers,o=null!==a?a:this.props.currUser;return(0!==n.length?n:this.props.users).filter(function(e){return e._id!==o._id}).map(function(t){var a=o.following.find(function(e){return e===t._id});if(!pe()(o,t))return r.a.createElement(he,{ifFollowing:!!a,user:t,handleAddFriendClick:e.handleAddFriendClick})})}}]),t}(r.a.Component),Ee=Object(A.b)(function(e){return{users:e.users.users,currUser:e.auth.user}},{follow:G})(ge),Oe=function(e){return r.a.createElement($.a,{selection:!0,verticalAlign:"middle"},r.a.createElement($.a.Item,{active:!1},r.a.createElement($.a.Content,null,r.a.createElement(g.a,{verticalAlign:"middle"},r.a.createElement(g.a.Column,{width:"12",style:{display:"flex",flexDirection:"row"}},r.a.createElement(m.a,{name:"user"}),r.a.createElement($.a.Header,null,e.friend.name))))))},fe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.updatedCurrUser,a=e.updatedUsers,n=null!==t?t:this.props.currUser;return(0!==a.length?a:this.props.users).filter(function(e){if(pe()(n,e))return e}).map(function(e){return r.a.createElement(Oe,{friend:e})})}}]),t}(r.a.Component),ve=Object(A.b)(function(e){return{currUser:e.auth.user,users:e.users.users}},{updateUser:x})(fe),be=a(533),ye=function(e){return r.a.createElement($.a,{selection:!0,verticalAlign:"middle"},r.a.createElement($.a.Item,{active:!1},r.a.createElement($.a.Content,null,r.a.createElement(g.a,{verticalAlign:"middle"},r.a.createElement(g.a.Column,{width:"8",style:{display:"flex",flexDirection:"row"}},r.a.createElement(m.a,{name:"user"}),r.a.createElement($.a.Header,null,e.user.name)),r.a.createElement(g.a.Column,null,r.a.createElement(C.a,{circular:!0,size:"tiny",positive:!0,onClick:function(){return e.handleAddFriendClick(e.user)}},r.a.createElement(be.a,{style:{color:"white"}}," Confirm ")))))))},Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleAddFriendClick=function(e){var t=a.props,n=t.currUser;(0,t.follow)(n._id,e._id)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.updatedCurrUser,n=t.updatedUsers,o=a||this.props.currUser;return(0!==n.length?n:this.props.users).map(function(t){if(!pe()(o,t)){var a=o.followers.find(function(e){return e===t._id});return console.log(a,"followers"),a?r.a.createElement(ye,{user:t,handleAddFriendClick:e.handleAddFriendClick}):void 0}})}}]),t}(r.a.Component),Se=Object(A.b)(function(e){return{currUser:e.auth.user,users:e.users.users}},{follow:G})(Ce),we=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement($.a,{divided:!0,relaxed:!0},r.a.createElement($.a.Item,null,r.a.createElement(Se,{updatedCurrUser:this.props.updatedCurrUser,updatedUsers:this.props.updatedUsers})),r.a.createElement($.a.Item,null,r.a.createElement(ve,{updatedCurrUser:this.props.updatedCurrUser,updatedUsers:this.props.updatedUsers})))}}]),t}(r.a.Component),Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={updatedCurrUser:null,updatedUsers:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;re()("http://localhost:8000").on("follow",function(t){var a=e.props.users.map(function(e){return e._id===t.users[1]._id?t.users[1]:e._id===t.users[0]._id?t.users[0]:e});e.props.currUser._id===t.users[0]._id?e.setState({updatedCurrUser:t.users[0]}):e.props.currUser._id===t.users[1]._id&&e.setState({updatedUsers:a})})}},{key:"render",value:function(){var e=this,t=[{menuItem:"Friends",render:function(){return r.a.createElement(ue.a.Pane,null,r.a.createElement(we,{updatedCurrUser:e.state.updatedCurrUser,updatedUsers:e.state.updatedUsers}))}},{menuItem:"All users",render:function(){return r.a.createElement(ue.a.Pane,null,r.a.createElement(Ee,{updatedCurrUser:e.state.updatedCurrUser,updatedUsers:e.state.updatedUsers}))}}];return r.a.createElement(ue.a,{panes:t})}}]),t}(r.a.Component),_e=Object(A.b)(function(e){return{currUser:e.auth.user,users:e.users.users}},{updateUser:x})(Le),Ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderPosts=function(){return r.a.createElement(O.a,null,r.a.createElement("div",null,"test"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(),this.props.getPosts()}},{key:"render",value:function(){return r.a.createElement(ce.a,null,r.a.createElement(g.a,{padded:!0,centered:!0,style:{backgroundColor:"#f5f5f5"}},r.a.createElement(g.a.Row,{style:{backgroundColor:"white"}},r.a.createElement(g.a.Column,{width:"16"},r.a.createElement(Y,null))),r.a.createElement(g.a.Row,{id:"main-content"},r.a.createElement(g.a.Column,{width:"13"},r.a.createElement(O.a,{style:{minHeight:"70vh"}},this.props.user&&r.a.createElement(ie,null))),this.props.user&&r.a.createElement(g.a.Column,{width:"3"},r.a.createElement(_e,null)))))}}]),t}(n.Component),Me=Object(A.b)(function(e){return{user:e.auth.user,isAuthanticated:e.auth.isAuthanticated,posts:e.posts.posts}},{getUsers:N,getPosts:F,login:H})(Ae),je=(a(513),a(61)),Re=a(282),ke=a(16),Ie={token:localStorage.getItem("token"),tokenExp:localStorage.getItem("tokenExp"),isAuthenticated:!1,isLoading:!1,user:JSON.parse(localStorage.getItem("user"))},Pe={message:{},status:null,id:null},Ue={loginModalOpened:!1,registerModalOpened:!1,forgotPasswordOpened:!1,addPostModalOpened:!1},De={message:{},status:null,id:null},Te={message:{},status:null,id:null},Ge={isLoading:!1,updatingError:null,users:[]},xe={postsLoading:!1,posts:[]},Ne=Object(je.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSTS":return Object(ke.a)({},e,{posts:t.payload,postsLoading:!1});case"POSTS_LOADING":return Object(ke.a)({},e,{postsLoading:!0});case"ADD_POST":case"ADD_TO_POSTS":return Object(ke.a)({},e,{posts:e.posts.concat(t.payload)});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LOADING":return Object(ke.a)({},e,{isLoading:!0});case"USER_UPDATING":case"USERS_LOADED":return Object(ke.a)({},e,{isLoading:!1,users:t.payload});case"USER_UPDATED":return Object(ke.a)({},e,{users:e.users.map(function(e){return e._id===t.payload._id?Object(ke.a)({},t.payload):e})});case"UPDATING_USER_ERROR":return Object(ke.a)({},e,{isLoading:!1,updatingError:t.payload});default:return e}},loginError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOGIN_ERRORS":return{message:t.payload.message,status:t.payload.status,id:t.payload.id};case"CLEAR_LOGIN_ERRORS":return{message:{},status:null,id:null};default:return e}},registerError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{message:t.payload.message,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{message:{},status:null,id:null};default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{message:t.payload.message,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{message:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_LOADING":return Object(ke.a)({},e,{isLoading:!0});case"REGISTER_SUCCESS":return Object(ke.a)({},e,t.payload,{isLoading:!1});case"LOGIN_LOADING":return Object(ke.a)({},e,{isLoading:!0});case"LOGIN_SUCCESS":return Object(ke.a)({},e,{token:t.payload.token,tokenExp:t.payload.tokenExp,user:t.payload.user,isAuthenticated:!0,isLoading:!1});case"LOGIN_FAIL":return Object(ke.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExp"),Object(ke.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});case"REGISTER_FAIL":return Object(ke.a)({},e,{token:null,user:null,isLoading:!1});default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;switch((arguments.length>1?arguments[1]:void 0).type){case"OPEN_LOGIN_MODAL":return Object(ke.a)({},e,{loginModalOpened:!0});case"CLOSE_LOGIN_MODAL":return Object(ke.a)({},e,{loginModalOpened:!1});case"OPEN_REGISTER_MODAL":return Object(ke.a)({},e,{registerModalOpened:!0});case"CLOSE_REGISTER_MODAL":return Object(ke.a)({},e,{registerModalOpened:!1});case"OPEN_FORGOT_PASSWORD_MODAL":return Object(ke.a)({},e,{forgotPasswordModalOpened:!0});case"CLOSE_FORGOT_PASSWORD_MODAL":return Object(ke.a)({},e,{forgotPasswordModalOpened:!1});case"OPEN_ADD_POST_MODAL":return Object(ke.a)({},e,{addPostModalOpened:!0});case"CLOSE_ADD_POST_MODAL":return Object(ke.a)({},e,{addPostModalOpened:!1});default:return e}}}),Fe=[Re.a],ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||je.d,He=Object(je.e)(Ne,{},ze(je.a.apply(void 0,Fe)));l.a.render(r.a.createElement(A.a,{store:He},r.a.createElement(Me,null)),document.getElementById("root"))},64:function(e,t){e.exports=function(e){var t=e().auth.token;console.warn(t,"TOKEN W TOKEN CONFIG FUNC :)  W USER ACTION");var a={headers:{"Content-type":"application/json"}};return t&&(a.headers.Authorization=t),a}},89:function(e,t){e.exports=function(e,t){return!(!e.following.includes(t._id)||!e.followers.includes(t._id))}}},[[294,1,2]]]);
//# sourceMappingURL=main.85bc47eb.chunk.js.map